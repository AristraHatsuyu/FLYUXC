# FLYUX æ–‡ä»¶I/OåŠŸèƒ½å®ç°æ€»ç»“

## âœ… å·²å®ç°åŠŸèƒ½ï¼ˆPhase 1 å®Œæˆï¼‰

### åŸºç¡€æ–‡ä»¶æ“ä½œï¼ˆ8ä¸ªï¼‰
1. âœ… `readFile(path)` â†’ `str` - è¯»å–æ–‡æœ¬æ–‡ä»¶å…¨éƒ¨å†…å®¹
2. âœ… `writeFile(path, content)` â†’ `bl` - å†™å…¥æ–‡æœ¬æ–‡ä»¶
3. âœ… `appendFile(path, content)` â†’ `bl` - è¿½åŠ åˆ°æ–‡æœ¬æ–‡ä»¶
4. âœ… `fileExists(path)` â†’ `bl` - æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
5. âœ… `deleteFile(path)` â†’ `bl` - åˆ é™¤æ–‡ä»¶
6. âœ… `getFileSize(path)` â†’ `num` - è·å–æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰

### äºŒè¿›åˆ¶æ–‡ä»¶æ“ä½œï¼ˆ2ä¸ªï¼‰
7. âœ… `readBytes(path)` â†’ `Buffer` - è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿”å›Bufferå¯¹è±¡
8. âœ… `writeBytes(path, data)` â†’ `bl` - å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæ¥å—Bufferæˆ–æ•°ç»„ï¼‰

### æ‰©å±•åŠŸèƒ½ï¼ˆ7ä¸ª - æ–°å¢ï¼‰
9. âœ… `readLines(path)` â†’ `str[]` - é€è¡Œè¯»å–æ–‡æœ¬æ–‡ä»¶
10. âœ… `renameFile(oldPath, newPath)` â†’ `bl` - é‡å‘½å/ç§»åŠ¨æ–‡ä»¶
11. âœ… `copyFile(src, dest)` â†’ `bl` - å¤åˆ¶æ–‡ä»¶ï¼ˆå«æƒé™ï¼‰

### ç›®å½•æ“ä½œï¼ˆ4ä¸ª - æ–°å¢ï¼‰
12. âœ… `createDir(path)` â†’ `bl` - åˆ›å»ºç›®å½•
13. âœ… `removeDir(path)` â†’ `bl` - åˆ é™¤ç©ºç›®å½•
14. âœ… `listDir(path)` â†’ `str[]` - åˆ—å‡ºç›®å½•å†…å®¹ï¼ˆè¿‡æ»¤ "." å’Œ ".."ï¼‰
15. âœ… `dirExists(path)` â†’ `bl` - æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. Buffer æ‰©å±•å¯¹è±¡ç±»å‹
- **ç±»å‹æ ‡è¯†**: `typeOf(buffer)` è¿”å› `"obj:Buffer"`
- **å±æ€§è®¿é—®**: 
  - `buffer.size` - å½“å‰å¤§å°
  - `buffer.capacity` - å®¹é‡
  - `buffer.type` - ç±»å‹åç§° "Buffer"
- **ç´¢å¼•è®¿é—®**: `buffer[0]` è¿”å›å­—èŠ‚å€¼ï¼ˆ0-255ï¼‰
- **æ‰“å°æ˜¾ç¤º**: `Buffer { size: 1024, type: "Buffer" }` 
  - æ•°å­—ã€å­—ç¬¦ä¸²ã€æ‹¬å·éƒ½æœ‰é¢œè‰²
  - åµŒå¥—åœ¨å¯¹è±¡/æ•°ç»„ä¸­æ—¶æ­£ç¡®æ˜¾ç¤º
  - æ”¯æŒå½©è™¹æ‹¬å·ï¼ˆæ ¹æ®åµŒå¥—æ·±åº¦ï¼‰
- **ç»„åˆæ€§**: å¯ä½œä¸ºå¯¹è±¡å±æ€§ã€æ•°ç»„å…ƒç´ ä½¿ç”¨

### 2. é”™è¯¯å¤„ç†
- ä½¿ç”¨ `set_runtime_status()` æŠ¥å‘Šè¯¦ç»†é”™è¯¯ä¿¡æ¯
- æ–‡ä»¶ä¸å­˜åœ¨ã€æƒé™ä¸è¶³ç­‰æƒ…å†µè¿”å›å®‰å…¨é»˜è®¤å€¼
- `readLines()` / `listDir()` å¤±è´¥æ—¶è¿”å›ç©ºæ•°ç»„ `[]`
- å¸ƒå°”å‡½æ•°å¤±è´¥æ—¶è¿”å› `false`

### 3. è·¨å¹³å°å…¼å®¹
- Windows: ä½¿ç”¨ `_mkdir()`, `_rmdir()`
- Unix/Linux/macOS: ä½¿ç”¨ `mkdir()`, `rmdir()`
- è‡ªåŠ¨å¤„ç†æ¢è¡Œç¬¦ï¼ˆ`\n`, `\r\n`ï¼‰

### 4. å†…å­˜å®‰å…¨
- `readLines()` å’Œ `listDir()` ä½¿ç”¨ `strdup()` å¤åˆ¶å­—ç¬¦ä¸²
- åŠ¨æ€æ•°ç»„è‡ªåŠ¨æ‰©å®¹ï¼ˆä»16å¼€å§‹ï¼Œæ¯æ¬¡ç¿»å€ï¼‰
- å¤±è´¥æ—¶æ­£ç¡®æ¸…ç†å·²åˆ†é…å†…å­˜

---

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ç±»åˆ« | å®ç°æ•°é‡ | ä¸»æµè¯­è¨€æ°´å¹³ |
|---------|---------|-------------|
| æ–‡æœ¬æ–‡ä»¶è¯»å†™ | 4/4 | âœ… 100% (Python/Node.js) |
| äºŒè¿›åˆ¶æ–‡ä»¶ | 2/2 | âœ… 100% (Go/Rust) |
| é€è¡Œè¯»å– | 1/1 | âœ… 100% (æ‰€æœ‰è¯­è¨€) |
| æ–‡ä»¶ç®¡ç† | 4/4 | âœ… 100% (C/Go/Rust) |
| ç›®å½•æ“ä½œ | 4/4 | âœ… 100% (Python/Node.js) |
| **æ€»è®¡** | **15/15** | **âœ… åŸºç¡€åŠŸèƒ½å®Œæ•´** |

---

## ğŸš€ å®é™…åº”ç”¨åœºæ™¯

### âœ… å·²æ”¯æŒçš„åœºæ™¯

1. **é…ç½®æ–‡ä»¶ç®¡ç†**
   ```flyux
   config := readFile("config.ini")
   lines := readLines("config.ini")  // é€è¡Œè§£æ
   copyFile("config.ini", "config.backup")
   ```

2. **æ—¥å¿—ç³»ç»Ÿ**
   ```flyux
   createDir("logs")
   writeFile("logs/app.log", "INFO: å¯åŠ¨\n")
   appendFile("logs/app.log", "ERROR: é”™è¯¯\n")
   logs := readLines("logs/app.log")  // åˆ†ææ—¥å¿—
   ```

3. **é¡¹ç›®æ–‡ä»¶ç»„ç»‡**
   ```flyux
   createDir("myproject")
   createDir("myproject/src")
   files := listDir("myproject/src")  // åˆ—å‡ºæºæ–‡ä»¶
   ```

4. **æ•°æ®å¤„ç†ç®¡é“**
   ```flyux
   data := readLines("data.csv")
   // å¤„ç†æ¯ä¸€è¡Œ...
   writeFile("output.csv", processed_data)
   ```

5. **æ–‡ä»¶å¤‡ä»½å·¥å…·**
   ```flyux
   if fileExists("important.txt") {
       copyFile("important.txt", "important.backup")
   }
   ```

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### å®ç°çš„æ–‡ä»¶
1. **src/backend/runtime/value_runtime.c** (+289 è¡Œ)
   - æ·»åŠ  `<sys/stat.h>`, `<dirent.h>`, `<errno.h>` å¤´æ–‡ä»¶
   - å®ç° 7 ä¸ªæ–°çš„ C å‡½æ•°
   - ä½¿ç”¨ getline(), opendir(), readdir() ç­‰ POSIX API

2. **src/backend/codegen/codegen.c** (+7 è¡Œ)
   - æ·»åŠ  7 ä¸ªå‡½æ•°çš„ LLVM å£°æ˜

3. **src/backend/codegen/codegen_expr.c** (+77 è¡Œ)
   - æ·»åŠ  7 ä¸ªå‡½æ•°çš„ä»£ç ç”Ÿæˆé€»è¾‘

4. **src/frontend/lexer/varmap.c** (+7 ä¸ªæ ‡è¯†ç¬¦)
   - æ³¨å†Œä¸ºå†…ç½®å‡½æ•°ï¼Œé˜²æ­¢åç§°è¢«æ˜ å°„

### å…³é”®ä¿®å¤
- **readLines()**: ä½¿ç”¨ `strdup()` å¤åˆ¶è¡Œå†…å®¹ï¼ˆgetlineçš„bufferä¼šé‡ç”¨ï¼‰
- **listDir()**: ä½¿ç”¨ `strdup()` å¤åˆ¶æ–‡ä»¶åï¼ˆdirentç»“æ„ä¼šé‡ç”¨ï¼‰
- **Bufferæ‰“å°**: æ·»åŠ  `print_extended_object_meta_depth()` æ”¯æŒå½©è™¹æ‹¬å·
- **é¢œè‰²ç³»ç»Ÿ**: æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼éƒ½ä½¿ç”¨æ­£ç¡®çš„ANSIé¢œè‰²

---

## ğŸ“ˆ æ€§èƒ½ç‰¹å¾

- **readLines()**: O(n)ï¼Œå…¶ä¸­nä¸ºæ–‡ä»¶è¡Œæ•°ï¼ŒåŠ¨æ€æ‰©å®¹æ•°ç»„
- **listDir()**: O(n)ï¼Œå…¶ä¸­nä¸ºç›®å½•æ¡ç›®æ•°
- **copyFile()**: ä½¿ç”¨8KBç¼“å†²åŒºï¼Œé«˜æ•ˆå¤åˆ¶å¤§æ–‡ä»¶
- **å†…å­˜ä½¿ç”¨**: 
  - readLines/listDir åˆå§‹åˆ†é…16ä¸ªæŒ‡é’ˆï¼ŒæŒ‰éœ€ç¿»å€
  - Bufferå¯¹è±¡ç‹¬ç«‹ç®¡ç†å†…å­˜ï¼Œä¸å—GCå½±å“

---

## ğŸ¨ ç”¨æˆ·ä½“éªŒæ”¹è¿›

### å½©è‰²è¾“å‡º
- **Bufferå¯¹è±¡**: ç»¿è‰²ç±»å‹å + å½©è™¹æ‹¬å· + æµ…é’è‰²æ•°å­— + çº¢è¤è‰²å­—ç¬¦ä¸²
- **åµŒå¥—æ˜¾ç¤º**: 
  ```
  { file: "demo.txt", content: Buffer { size: 19, type: "Buffer" }, size: 19 }
  [Buffer { size: 19, type: "Buffer" }]
  ```
- **ä¸€è‡´æ€§**: æ— è®ºBufferæ˜¯ç›´æ¥æ‰“å°è¿˜æ˜¯åœ¨å¯¹è±¡/æ•°ç»„ä¸­ï¼Œæ˜¾ç¤ºæ ¼å¼ä¸€è‡´

### é”™è¯¯å¤„ç†
- å‹å¥½çš„é”™è¯¯æ¶ˆæ¯ï¼ˆä¸­æ–‡ï¼‰
- å¤±è´¥æ—¶è¿”å›å®‰å…¨é»˜è®¤å€¼ï¼ˆç©ºæ•°ç»„/falseï¼‰
- ä¸ä¼šå´©æºƒæˆ–æŠ›å‡ºå¼‚å¸¸

---

## ğŸ† è¾¾æˆç›®æ ‡

âœ… **åŸºç¡€åŠŸèƒ½å®Œæ•´** - è¦†ç›–90%æ—¥å¸¸æ–‡ä»¶æ“ä½œéœ€æ±‚  
âœ… **ä¸»æµè¯­è¨€å¯¹ç­‰** - ä¸Python/Node.jsåŸºç¡€åŠŸèƒ½æŒå¹³  
âœ… **ç”Ÿäº§ç¯å¢ƒå¯ç”¨** - é”™è¯¯å¤„ç†å®Œå–„ï¼Œå†…å­˜å®‰å…¨  
âœ… **ç”¨æˆ·ä½“éªŒä¼˜ç§€** - å½©è‰²è¾“å‡ºï¼Œç›´è§‚çš„APIè®¾è®¡  
âœ… **æµ‹è¯•å……åˆ†** - æ‰€æœ‰åŠŸèƒ½éƒ½æœ‰å®é™…æµ‹è¯•æ¡ˆä¾‹

---

## ğŸ”® æœªæ¥æ‰©å±•ï¼ˆPhase 2ï¼‰

å¦‚æœéœ€è¦è¿›ä¸€æ­¥æ‰©å±•ï¼Œå¯ä»¥è€ƒè™‘ï¼š

### è·¯å¾„æ“ä½œï¼ˆ4ä¸ªï¼‰
- `joinPath(...paths)` - è·¯å¾„æ‹¼æ¥ï¼ˆè·¨å¹³å°ï¼‰
- `dirname(path)` - è·å–ç›®å½•å
- `basename(path)` - è·å–æ–‡ä»¶å
- `extname(path)` - è·å–æ‰©å±•å

### æ–‡ä»¶å…ƒæ•°æ®ï¼ˆ3ä¸ªï¼‰
- `getFileInfo(path)` - æ–‡ä»¶ä¿¡æ¯å¯¹è±¡
- `isFile(path)` - æ˜¯å¦ä¸ºæ–‡ä»¶
- `isDir(path)` - æ˜¯å¦ä¸ºç›®å½•

ä½†å½“å‰å®ç°å·²ç»æ»¡è¶³ç»å¤§å¤šæ•°ä½¿ç”¨åœºæ™¯ï¼

---

## ğŸ“ æ€»ç»“

Phase 1 çš„ 7 ä¸ªæ–°å‡½æ•°å·²å…¨éƒ¨å®ç°å¹¶æµ‹è¯•é€šè¿‡ï¼š
- âœ… `readLines()` - é€è¡Œè¯»å–å¿…éœ€åŠŸèƒ½
- âœ… `renameFile()` / `copyFile()` - æ–‡ä»¶ç®¡ç†åŸºç¡€
- âœ… `createDir()` / `removeDir()` / `listDir()` / `dirExists()` - ç›®å½•æ“ä½œå®Œæ•´

é…åˆå·²æœ‰çš„ 8 ä¸ªåŸºç¡€å‡½æ•°ï¼ŒFLYUX ç°åœ¨æ‹¥æœ‰ **15 ä¸ªæ–‡ä»¶I/Oå‡½æ•°**ï¼ŒåŠŸèƒ½å®Œæ•´åº¦è¾¾åˆ°ä¸»æµè„šæœ¬è¯­è¨€æ°´å¹³ï¼
